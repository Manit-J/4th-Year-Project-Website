<!DOCTYPE html>
<html>
<head>
    <title>Student Management</title>
    <style>
        input, button {
            margin: 5px;
        }
    </style>
</head>
<body>
<h2>Add Student</h2>
<input type="number" id="studentID" placeholder="Student ID">
<input type="text" id="studentName" placeholder="Student Name">
<input type="text" id="studentEmail" placeholder="Student Email">
<input type="SYSC, CIVE, ELEC, MAAE" id="studentDepartment" placeholder="Student Department">
<button onclick="addStudent()">Add Student</button>

<h2>Remove Student</h2>
<input type="number" id="removeID" placeholder="Student ID">
<button onclick="removeStudent()">Remove Student</button>

<h3>Current Students</h3>
<ul id="studentList"></ul>

<script>
    const students = [];

    function renderList() {
        const ul = document.getElementById('studentList');
        ul.innerHTML = '';
        students.forEach(s => {
            const li = document.createElement('li');
            li.textContent = `ID: ${s.id}, Name: ${s.name}, Email: ${s.email}`;
            ul.appendChild(li);
        });
    }

    function addStudent() {
        const id = document.getElementById('studentID').value;
        const name = document.getElementById('studentName').value;
        const email = document.getElementById('studentEmail').value;
        const department = document.getElementById("studentDepartment").value;
        if (id && name && email && department) {

            const student = { id, name, email, department };

            fetch("http://localhost:8080/students", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(student)
            })
                .then(response => {
                    if (!response.ok) throw new Error("Failed to save student");
                    return response.json();
                })
                .then(savedStudent => {
                    students.push(savedStudent);
                    renderList();
                })
                .catch(err => console.error(err));

            renderList();
            // Clear inputs
            document.getElementById('studentID').value = '';
            document.getElementById('studentName').value = '';
            document.getElementById('studentEmail').value = '';
            document.getElementById('studentDepartment').value = '';
        }
    }

    function removeStudent() {
        const id = document.getElementById('removeID').value;
        const index = students.findIndex(s => s.id === id);
        if (index !== -1) {
            students.splice(index, 1);
            renderList();
            document.getElementById('removeID').value = '';
        } else {
            alert("Student ID not found");
        }
    }
</script>
</body>
</html>